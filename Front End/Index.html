<!-- 
Lucas Xavier Ebling Pereira - 10692183 
Lucas Gabriel Mendes Miranda - 10265892
Luís Fernando Martins Rodrigues de Araújo - 11275189 
-->

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
    <title>The Animal House</title>
</head>

<body>

    <div id="app">
        <!--Cabecalho, Presente em todas as Paginas-->
        <div class="cabecalho">
            <header>
                <h1 id="logo-text">The Animal House</h1>
            </header>
        </div>
        <br>
        <!--Divs Presentes no login/paginal inicial-->
        <div v-show="currUser == usertypes[2]">
            <!--Div de Apresentacao - "Quem Nós Somos"-->
            <div class="whoarewe">
                <h2><u>Who we are:</u></h2>
                <p>Mussum Ipsum, cacilds vidis litro abertis. Leite de capivaris, leite de mula manquis sem cabeça.
                    Aenean aliquam molestie leo, vitae iaculis nisl. Vehicula non. Ut sed ex eros. Vivamus sit amet nibh
                    non tellus tristique interdum. Em pé sem cair, deitado sem dormir, sentado sem cochilar e fazendo
                    pose.
                    Mussum Ipsum, cacilds vidis litro abertis. Leite de capivaris, leite de mula manquis sem cabeça.
                    Aenean aliquam molestie leo, vitae iaculis nisl. Vehicula non. Ut sed ex eros. Vivamus sit amet nibh
                    non tellus tristique interdum. Em pé sem cair, deitado sem dormir, sentado sem cochilar e fazendo
                    pose.Mussum Ipsum, cacilds vidis litro abertis. Leite de capivaris, leite de mula manquis sem
                    cabeça. Aenean aliquam molestie leo.
                </p>

            </div>
            <!--Div Para o login-->
            <div class="loginform">
                <h2>Become Our Customer!</h2>
                <table>
                    <tr>
                        <td><label>Username:</label></td>
                        <td><input class="input-1 transparent" type="text" v-model="userInfo.username"></td>
                    </tr>
                    <tr>
                        <td><label>Password:</label></td>
                        <td><input class="input-1 transparent" type="password" v-model="userInfo.password"></td>
                    </tr>
                </table>

                <label>Log In as Administrator:</label>
                <input type="checkbox" v-model="admincheck">
                <br>

                <button v-on:click="login">LOG IN</button>
                <button v-on:click="setPage('main')">SIGN UP</button>

                <div v-show="currPage == pages[1]">

                    <div class="contrastbox">
                        <table>
                            <tr>
                                <td><label>Username:</label></td>
                                <td><input class="input-1 transparent" type="text" v-model="userInfo.username"></td>
                            </tr>
                            <tr>
                                <td><label>Phone Number:</label></td>
                                <td><input class="input-1 transparent" type="text" v-model="userInfo.phonenumber"></td>
                            </tr>
                            <tr>
                                <td><label>Address:</label></td>
                                <td><input class="input-1 transparent" type="text" v-model="userInfo.address"></td>
                            </tr>
                            <tr>
                                <td><label>Email:</label></td>
                                <td><input class="input-1 transparent" type="text" v-model="userInfo.email"></td>
                            </tr>
                            <tr>
                                <td><label>Password:</label></td>
                                <td><input class="input-1 transparent" type="password" v-model="userInfo.password"></td>
                            </tr>
                        </table>
                        <button v-on:click="signin">Create Account</button>
                    </div>
                </div>

            </div>
        </div>
        <!--Fim dos divs Pagina de Login-->

        <!--Secao divs Usuario = Cliente-->
        <div v-show="currUser == usertypes[0]">
            <!--Div De usuário Aparece sempre que usuario = cliente-->
            <div class="userDiv">

                <img :src="'http://localhost:3000/' + userInfo.imageURL">
                <p style="float: left;">{{userInfo.username}}</p>
                <button v-on:click="exite()">Exit</button>
                <button @click="emptyCart()">Empty Cart</button>
                <button @click="setPage('checkout')">Checkout</button>
                <button @click="setPage('main')">Dashboard</button>
                <div class="cart">My Cart: U$ {{ myCart.total.toFixed(2) }}</div>

            </div>
            <br>

            <!--Pagina Menu de opcoes cliente-->
            <div v-show="currPage == pages[1]">
                <div class="seletor cliente">
                    <h2>Client's Dashboard</h2>
                    <button class="botao-menu" v-on:click="setPage('service'); getEveryService(); getAppointments(); getPets(userInfo._id);">Schedule
                        Service<br><br><img src="images/calendar.png"></button>
                    <button class="botao-menu" v-on:click="setPage('products'); getEveryProduct();">Buy
                        Products<br><br><img src="images/shopping-cart.png"></button>
                    <button class="botao-menu" v-on:click="setPage('manage1')">Update Info<br><br><img
                            src="images/registration.png"></button>
                    <button class="botao-menu" v-on:click="setPage('manage2'); getPets(userInfo._id);">Register Pets<br><br><img
                            src="images/carrier.png"></button>
                </div>
            </div>
            <!--Pagina Registrar Animais-->
            <div v-show="currPage == pages[5]">
                <div class="container-1 blue view-and-register">
                    <h2>Register Pets</h2>
                    <div class="scroll-container view-animals">
                        <!--Divs de Registro Animal-->
                        <div class="regAnimal" v-for="(pet, index) in pets">
                            <img class="small-img" :src="'http://localhost:3000/' + pet.petImage">
                            <ul class="list-card">
                                <li class="list-card-item">Name: {{ pet.name }}</li>
                                <li class="list-card-item">Species: {{ pet.species }}</li>
                                <li class="list-card-item">Breed: {{ pet.breed }}</li>
                                <li class="list-card-item">Age: {{ pet.age }}</li>
                            </ul>
                            <ul class="list-card">
                                <p>Reserves:</p>
                                <li class="list-card-item" v-for="service in pets[index].services">
                                    {{ service.name }}: {{ service.day }}, {{ service.hour }}h
                                </li>
                            </ul>
                            <button class="closeButton" class="button2"
                                @click="deletePet(index)">X</button>
                        </div>
                    </div>

                    <!--Div de inserir Novo animal-->
                    <div class="container-2 blue register-container">
                        <p v-if="erros.length">
                            <b>
                                Errors:
                            </b>
                        <ul>
                            <li v-for="erro in erros">
                                {{erro}}
                            </li>
                        </ul>
                        </p>
                        <div class="column">
                            <img v-if="!urlPreview" class="small-img" src="images/pet.png">
                            <img v-if="urlPreview" class="small-img" :src="urlPreview">
                        </div>
                        <form @submit="validateFormAddPets($event); addPet(userInfo._id);">
                            <div class="column">
                                <input class="input-1" type="text" name="pet-name" v-model="addPetForm.name"
                                    placeholder="Pet's name">
                                <input class="input-1" type="text" name="pet-species" v-model="addPetForm.species"
                                    placeholder="Pet's species"> 
                                <input type="file" @change="previewImage">    
                            </div>
                            <div class="column">
                                <input class="input-1" type="text" name="pet-breed" v-model="addPetForm.breed"
                                    placeholder="Pet's breed">
                                <input class="input-1" type="text" name="pet-age" v-model="addPetForm.age"
                                    placeholder="Pet's age">
                                <button type="submit" class="btn-1 green">Add Pet</button>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
            <!--Pagina editar registro-->
            <div v-show="currPage ==pages[4]">
                <div class="useReg">
                    <h2>Update Info</h2>
                    <br>
                    <div class="container-3 blue">
                        <img v-if="urlPreview" :src="urlPreview">                        
                        <img v-if="!urlPreview" :src="'http://localhost:3000/' + userInfo.imageURL">
                        <br>
                        <input type="file" @change="previewImage">
                        <table>
                            <tr>
                                <td><label>Phone Number:</label></td>
                                <td><input class="input-1 white" type="text" v-model="userInfoUpdated.phonenumber"></td>
                            </tr>
                            <tr>
                                <td><label>Address:</label></td>
                                <td><input class="input-1 white" type="text" v-model="userInfoUpdated.address"></td>
                            </tr>
                            <tr>
                                <td><label>Email:</label></td>
                                <td><input class="input-1 white" type="text" v-model="userInfoUpdated.email"></td>
                            </tr>
                            <tr>
                                <td><label>Password:</label></td>
                                <td><input class="input-1 white" type="password" v-model="userInfoUpdated.password">
                                </td>
                            </tr>
                        </table>
                        <button class="btn-1 green" @click="updateUserInfo()">Confirm Changes</button>
                    </div>
                </div>
            </div>

            <!--Pagina comprar Produtos-->
            <div v-show="currPage == pages[2]">
                <!--Modal, Div usado para mostrar a verão "grande" do produto-->
                <div id="fancymodal" class="big-box-modal">
                    <div class="serv-grande">
                        <button class="closeButton" onclick="closer()">X</button>
                        <img :src="'http://localhost:3000/' + selectedProduct.productImage">
                        <br>
                        <em>Product Name: {{ selectedProduct.name }}</em>
                        <br>
                        <em>In stock: {{ selectedProduct.stock }}</em>
                        <br>
                        <em>Price: ${{ selectedProduct.price }}</em>
                        <br>
                        <button v-if="selectedProduct.stock > 0" class="buy-btn-big"
                            @click="addToCart(selectedProduct.name, selectedProduct.price, selectedProduct._id, 'product', selectedProduct.index); closer3();">ADD TO CART</button>
                        <input v-model="qtdSelected" type="number" min="1" :max="selectedProduct.stock">
                        <br>
                        <div id="descricao-produto">
                            <h3>Product Description:</h3>
                            <p>
                                {{ selectedProduct.description }}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="seletor">
                    <h2>Buy Products:</h2>
                    <ul>
                        <li v-for="(product, index) in products">
                            <!--Div De produtos "pequeno"-->
                            <div class="serv-pequeno">
                                <img class="prod-serv-miniatura" :src="'http://localhost:3000/' + product.productImage">
                                <br>
                                <em>Product Name: {{ product.name }}</em>
                                <br>
                                <em>In stock: {{ product.stock }}</em>
                                <br>
                                <em>Price: ${{ product.price }}</em>
                                <br>
                                <button v-if="product.stock > 0" class="buy-btn-small"
                                    v-on:click="setSelectedProduct(index); showmodal();">BUY</button>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!--Pagina Comprar Servicos-->
            <div v-show="currPage == pages[3]">
                <!--Similar A de Produtos, temos aqui um "servico" grande quando clicado-->
                <div id="bigmodal2" class="big-box-modal" style="display: none;">
                    <div class="serv-grande" style="min-height: 900px;">
                        <button class="closeButton" id="closem2" onclick="closer3()">X</button>
                        <img :src="'http://localhost:3000/' + selectedService.ServiceImage">
                        <br>
                        <em>Service Name: {{ selectedService.name }}</em>
                        <br>
                        <em>Price: ${{ selectedService.price }}/h</em>
                        <br>
                        <br>
                        <button class="buy-btn-big"
                            @click="addToCart(selectedService.name, selectedService.price, selectedService._id, 'service', selectedService.index, selectedService.ServiceImage); closer3();">BOOK</button>
                        <br>
                        <div id="descricao-servico">
                            <h3>Product Description:</h3>
                            <p>
                                {{ selectedService.description }}
                            </p>
                            <h3>Choose the pet:</h3>
                            <select v-model="selectedPet">
                                <option value="" ></option>
                                <option v-for="pet in pets" :value="pet._id">{{ pet.name }}, {{ pet.age }}, {{ pet.species }}, {{ pet.breed }}</option>
                            </select>                            
                        </div>
                        <div id="area-agendamento">
                            <h3>Choose your time slot:</h3>
                            <!--Div para fazer o "calendario"-->
                            <div class="time-slots">
                                <button @click="previousCalendarPage" class="week-selector"><</button>
                                        <button @click="nextCalendarPage" class="week-selector">></button>
                                           
                                        <div v-if="dates && appointments" class="tabela">
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>{{ dates[0 + calendarPage * 7].getDate() + '/' + (Number(dates[0 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                                        <th>{{ dates[1 + calendarPage * 7].getDate() + '/' + (Number(dates[1 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                                        <th>{{ dates[2 + calendarPage * 7].getDate() + '/' + (Number(dates[2 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                                        <th>{{ dates[3 + calendarPage * 7].getDate() + '/' + (Number(dates[3 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                                        <th>{{ dates[4 + calendarPage * 7].getDate() + '/' + (Number(dates[4 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                                        <th>{{ dates[5 + calendarPage * 7].getDate() + '/' + (Number(dates[5 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                                        <th>{{ dates[6 + calendarPage * 7].getDate() + '/' + (Number(dates[6 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td class="horario-dado">9h - 10h</td>
                                                        <!-- renderiza cada linha do calendário de acordo com o vetor de appointments -->
                                                        <td v-for="index in 7" :key="index">
                                                            <button @click="toggleSelect(index, 1)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].isSelected,
                                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].status">
                                                                LIVRE
                                                            </button>

                                                            <button v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].status" class="ocupado">
                                                              
                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].servicename}}<br>

                                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].imageurl"><br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].petname}}<br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].ownername}}<br>
                                                            </button>                                                            
                                                        </td>        
                                                    </tr>
                                                    <tr>
                                                        <td class="horario-dado">10h - 11h</td>
                                                        <td v-for="index in 7" :key="index">
                                                            <button @click="toggleSelect(index, 2)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].isSelected,
                                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].status">
                                                                LIVRE
                                                            </button>

                                                            <button v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].status" class="ocupado">
                                                              
                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].servicename}}<br>

                                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].imageurl"><br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].petname}}<br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].ownername}}<br>
                                                            </button>                                                            
                                                        </td>    
                                                    </tr>
                                                    <tr>
                                                        <td class="horario-dado">11h - 12h</td>

                                                        <td v-for="index in 7" :key="index">
                                                            <button @click="toggleSelect(index, 3)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].isSelected,
                                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].status">
                                                                LIVRE
                                                            </button>

                                                            <button v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].status" class="ocupado">
                                                              
                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].servicename}}<br>

                                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].imageurl"><br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].petname}}<br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].ownername}}<br>
                                                            </button>                                                            
                                                        </td>       
                                                    </tr>
                                                    <tr>
                                                        <td class="horario-dado">12h - 13h</td>

                                                        <td v-for="index in 7" :key="index">
                                                            <button @click="toggleSelect(index, 4)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].isSelected,
                                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].status">
                                                                LIVRE
                                                            </button>

                                                            <button v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].status" class="ocupado">
                                                              
                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].servicename}}<br>

                                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].imageurl"><br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].petname}}<br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].ownername}}<br>
                                                            </button>                                                            
                                                        </td>    
                                                    </tr>
                                                    <tr>
                                                        <td class="horario-dado">13h - 14h</td>

                                                        <td v-for="index in 7" :key="index">
                                                            <button @click="toggleSelect(index, 5)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].isSelected,
                                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].status">
                                                                LIVRE
                                                            </button>

                                                            <button v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].status" class="ocupado">
                                                              
                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].servicename}}<br>

                                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].imageurl"><br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].petname}}<br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].ownername}}<br>
                                                            </button>                                                            
                                                        </td>    
                                                    </tr>
                                                    <tr>
                                                        <td class="horario-dado">14h - 15h</td>

                                                        <td v-for="index in 7" :key="index">
                                                            <button @click="toggleSelect(index, 6)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].isSelected,
                                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].status">
                                                                LIVRE
                                                            </button>

                                                            <button v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].status" class="ocupado">
                                                              
                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].servicename}}<br>

                                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].imageurl"><br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].petname}}<br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].ownername}}<br>
                                                            </button>                                                            
                                                        </td>       
                                                    </tr>
                                                    <tr>
                                                        <td class="horario-dado">15h - 16h</td>

                                                        <td v-for="index in 7" :key="index">
                                                            <button @click="toggleSelect(index, 7)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].isSelected,
                                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].status">
                                                                LIVRE
                                                            </button>

                                                            <button v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].status" class="ocupado">
                                                              
                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].servicename}}<br>

                                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].imageurl"><br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].petname}}<br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].ownername}}<br>
                                                            </button>                                                            
                                                        </td>     
                                                    </tr>
                                                    <tr>
                                                        <td class="horario-dado">16h - 17h</td>

                                                        <td v-for="index in 7" :key="index">
                                                            <button @click="toggleSelect(index, 8)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].isSelected,
                                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].status">
                                                                LIVRE
                                                            </button>

                                                            <button v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].status" class="ocupado">
                                                              
                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].servicename}}<br>

                                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].imageurl"><br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].petname}}<br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].ownername}}<br>
                                                            </button>                                                            
                                                        </td>       
                                                    </tr>
                                                    <tr>
                                                        <td class="horario-dado">17h - 18h</td>

                                                         <td v-for="index in 7" :key="index">
                                                            <button @click="toggleSelect(index, 9)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].isSelected,
                                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].status">
                                                                LIVRE
                                                            </button>

                                                            <button v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].status" class="ocupado">
                                                              
                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].servicename}}<br>

                                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].imageurl"><br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].petname}}<br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].ownername}}<br>
                                                            </button>                                                            
                                                        </td>        
                                                    </tr>

                                                    <tr>
                                                        <td class="horario-dado">18h - 19h</td>

                                                        <td v-for="index in 7" :key="index">
                                                            <button @click="toggleSelect(index, 10)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].isSelected,
                                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].status">
                                                                LIVRE
                                                            </button>

                                                            <button v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].status" class="ocupado">
                                                              
                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].servicename}}<br>

                                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].imageurl"><br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].petname}}<br>

                                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].ownername}}<br>
                                                            </button>                                                            
                                                        </td>       
                                                    </tr>                                                                                                        
                                                </tbody>
                                            </table>
                                        </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="seletor">
                    <h2>Schedule Services:</h2>
                    <ul>
                        <li v-for="(service, index) in services">
                            <!--Div Para os serviços pequenos-->
                            <div class="serv-pequeno">
                                <img class="prod-serv-miniatura" :src="'http://localhost:3000/' + service.ServiceImage">
                                <br>
                                <em>Service name: {{ service.name }}</em>
                                <br>
                                <em>Price: ${{ service.price }}/h</em>
                                <br>
                                <br>
                                <button class="buy-btn-small"
                                    v-on:click="setSelectedService(index); showmodal3();">BOOK</button>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div v-show="currPage == pages[8]">
                <!-- div para inserir informações de cartão de crédito -->
                <div class="useReg">
                    <h2>Check Out</h2>
                    <br>
                    <div class="container-3 blue">
                        <p>
                            Please, enter your credit card information:
                        </p>
                        <table>
                            <tr>
                                <td><label>Name:</label></td>
                                <td><input class="input-1 white" type="text"></td>
                            </tr>
                            <tr>
                                <td><label>Number:</label></td>
                                <td><input class="input-1 white" type="number"></td>
                            </tr>
                            <tr>
                                <td><label>CVV:</label></td>
                                <td><input class="input-1 white" type="number"></td>
                            </tr>
                            <tr>
                                <td><label>Expiration Date:</label></td>
                                <td><input class="input-1 white" type="month"></td>
                            </tr>                
                        </table>
                        <button class="btn-1 green" @click="checkout()">Finish Purchase</button>
                    </div>
                </div>  
            </div>    
        </div>
        <!--Fim Secao divs Usuario = Cliente-->

        <!--Secao divs Usuario = Admin-->
        <div v-show="currUser == usertypes[1]">
            <!--Div Admin, presente em todo momento em que user = admin-->
            <div class="userDiv">

                <img :src="'http://localhost:3000/' + userInfo.imageURL">
                <p style="float: left;">{{userInfo.username}}</p>
                <button v-on:click="exite()">Exit</button>


            </div>

            <!--Menu de opcoes Admin-->
            <div v-show="currPage == pages[1]">
                <br>
                <div class="seletor admin">
                    <h2>Admin's Dashboard</h2>
                    <button class="botao-menu" v-on:click="setPage('manage1'); getEveryAdmin()">Manage Admins<br><br><img
                            src="images/admin.png"></button>
                    <button class="botao-menu" v-on:click="setPage('manage2'); getEveryUser()">Manage Clients<br><br><img
                            src="images/cliente.png"></button>
                    <button class="botao-menu" v-on:click="setPage('products'); getEveryProduct()">Manage Products<br><br><img
                            src="images/osso.png"></button>
                    <button class="botao-menu" v-on:click="setPage('service'); getEveryService()">Manage Services<br><br><img
                            src="images/banho.png"></button>
                </div>
            </div>

            <!--Div Pagina Inventario Produtos-->
            <div v-show="currPage == pages[2]">
                <br>
                <div class="manager">
                    <!--Div Para edicao Usado, com leves variacoes em todos os menus de edicao-->
                    <div class="editor" v-if="addProductOption">
                        <h2>Add Product</h2>
                        <form @submit="addProduct($event)">
                            <img class="prod-serv-miniatura" v-if="urlPreview" :src="urlPreview">                        
                            <img class="prod-serv-miniatura" v-if="!urlPreview" :src="'http://localhost:3000/' + 'uploads/Default.png'">    
                            <input type="file" @change="previewImage">
                            <input class="nome-prod-serv" id="nome-produto-editor" value="Product's name"
                                placeholder="Product's name" type="text" v-model="productInfo.name"></input>
                             <input value="" placeholder="Product's price"
                                type="text" v-model="productInfo.price"></input>
                            <input type="text" value="Product Description" placeholder = "Product Description"
                                v-model="productInfo.description"></input>
                            <input type="text" name="estoque" value="" placeholder="Product's stock"
                                v-model="productInfo.stock"></input>
                            <button class="save-btn" type="submit">Save</button>
                        </form>
                        
                    </div>
                    
                    <div class="editor" v-else="addProductOption">
                        <h2>Edit Product</h2>
                        <form @submit="updateProductInfo($event)">
                            <img v-if="urlPreview" class="prod-serv-miniatura" :src="urlPreview">
                            <img v-if="!urlPreview" class="prod-serv-miniatura" :src="'http://localhost:3000/' + productInfoUpdated.productImage">
                            <input type="file" @change="previewImage">
                            <input class="nome-prod-serv" id="nome-produto-editor" value="Product's name"
                                placeholder="Product's name" type="text" v-model="productInfoUpdated.name"></input>
                            <input value="Price" placeholder="Product's price"
                                type="text" v-model="productInfoUpdated.price"></input>
                            <input type="text" value="Description" placeholder="Product Description"
                            v-model="productInfoUpdated.description"> </input>
                            <input type="text" name="estoque" value="Product's stock" placeholder="Product's stock"
                                v-model="productInfoUpdated.stock"></input>
                            <button class="save-btn" type="submit">Save</button>
                        </form>
                    </div>

                    <!--Div de Inventario - Permite Visualisar o produto de forma resumida-->
                    <div class="inventory">
                        <button class="closeButton" v-on:click="setPage('main')">X</button>
                        <h2>Product Inventory</h2>
                        <button class="inventory-btn add-btn" @click="addProductOption=true" ><img class="img-btn" src="images/plus.png"></button>
                        <div class="lista-registros" >
                            <ul class="registro" v-for="(product, index) in products">
                                <li class="registro-nome">Name: {{product.name}} / Stock: {{product.stock}} / Sold: {{product.bought}} </li>
                                <button class="inventory-btn btn-del" @click="deleteproduct(index)"><img class="img-btn"
                                        src="images/trash.png"></button>
                                <button class="inventory-btn btn-edit"><img class="img-btn"
                                        src="images/edit.png" @click="addProductOption=false;setproductinfo(index)"></button>
                                </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!--Div Inventario Servicos-->
            <div v-show="currPage == pages[3]">
                <br>
                <div class="manager">
                    <!--Div Editor-->
                    <!--Div Adicao de Servico-->
                    <div class="editor" v-if="addServiceOption">
                        <h2>Add Service</h2>
                        <form @submit="addService($event)">
                            <img class="prod-serv-miniatura" v-if="urlPreview" :src="urlPreview">                        
                            <img class="prod-serv-miniatura" v-if="!urlPreview" :src="'http://localhost:3000/' + 'uploads/Default.png'">    
                            <input type="file" @change="previewImage">
                            <input class="nome-prod-serv" value="Service's name"
                                placeholder="Service's name" type="text" v-model="serviceInfo.name"></input>
                             <input value="" placeholder="Service's price"
                                type="text" v-model="serviceInfo.price"></input>
                            <input type="text" value="Service Description" placeholder = "Service Description"
                                v-model="serviceInfo.description"></input>
                            <button class="save-btn" type="submit">Save</button>
                        </form>
                        <button class="time-slots-btn" @click="setPage('special2'); getAppointments();">Time Slots</button>                        
                    </div>

                    <!--Div Edicao de Servico-->
                    <div class="editor" v-else="addServiceOption">
                        <h2>Edit Service</h2>
                        <form @submit="editserviceInfo($event)">
                            <img class="prod-serv-miniatura" v-if="urlPreview" :src="urlPreview">                        
                            <img class="prod-serv-miniatura" v-if="!urlPreview" :src="'http://localhost:3000/' + this.serviceInfoUpdated.serviceImage">    
                            <input type="file" @change="previewImage">
                            <input class="nome-prod-serv" value="Service's name"
                                placeholder="Service's name" type="text" v-model="serviceInfoUpdated.name"></input>
                             <input value="" placeholder="Service's price"
                                type="text" v-model="serviceInfoUpdated.price"></input>
                            <input type="text" value="Service Description" placeholder = "Service Description"
                                v-model="serviceInfoUpdated.description"></input>
                            <button class="save-btn" type="submit">Save</button>
                        </form>
                        <button class="time-slots-btn" @click="setPage('special2'); getAppointments();">Time Slots</button>        
                        
                    </div>

                    <!--Div de Inventario-->
                    <div class="inventory">
                        <button class="closeButton" v-on:click="setPage('main')">X</button>
                        <h2>Product Inventory</h2>
                        <button class="inventory-btn add-btn" @click="addServiceOption = true" ><img class="img-btn" src="images/plus.png"></button>
                        <div class="lista-registros" >
                            <ul class="registro" v-for="(service, index) in services">
                                <li class="registro-nome">Name: {{service.name}} / Sold: {{service.bought}} </li>
                                <button class="inventory-btn btn-del" @click="deleteservice(index)"><img class="img-btn"
                                        src="images/trash.png"></button>
                                <button class="inventory-btn btn-edit"><img class="img-btn"
                                        src="images/edit.png" @click="addServiceOption=false;setserviceinfo(index)"></button>
                                </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!--Div Manage Admins-->
            <div v-show="currPage == pages[4]">
                <br>
                <div class="manager">
                    <!--Div Add Admin-->
                    <div class="editor" v-if="addAdminOption">
                        <h2>Add Admin</h2>
                        <img class="prod-serv-miniatura" v-if="urlPreview" :src="urlPreview">                        
                        <img class="prod-serv-miniatura" v-if="!urlPreview" :src="'http://localhost:3000/' + 'uploads/Default.png'">
                        <br>
                        <input type="file" @change="previewImage">
                        <form @submit="addAdmin($event)">
                            <input class="nome-prod-serv" id="nome-admin-editor" value="Admin's name"
                                placeholder="Admin's Name" type="text" v-model="adminInfo.realName"></input>
                            <input id="admin-address" value="Admin's Address" placeholder="Admin's Address"
                                type="text" v-model="adminInfo.address"></input>
                            <input id="admin-phone" value="Admin's Phone" placeholder="Admin's Phone" type="text"
                                v-model="adminInfo.phonenumber"></input>
                            <input id="admin-email" value="Admin's E-mail" placeholder="Admin's E-mail" type="text"
                                v-model="adminInfo.email"></input>
                            <input id="admin-nickname" value="Admin's Nickname" placeholder="Admin's Nickname"
                                type="text" v-model="adminInfo.username"></input>
                            <input id="admin-password" value="Admin's password" placeholder="Admin's password"
                                type="text" v-model="adminInfo.password"></input>
                            <button type="submit" class="save-btn">Save</button>   
                        </form>
                    </div>
                    <!--Div Edit Admin-->
                    <div class="editor" v-else="addAdminOption">
                        <h2>Edit Admin</h2>
                        <img v-if="urlPreview" class="prod-serv-miniatura" :src="urlPreview">
                        <img v-if="!urlPreview" class="prod-serv-miniatura" :src="'http://localhost:3000/' + adminInfoUpdated.profileImage">
                        <br>
                        <input type="file" @change="previewImage">
                        <form @submit="updateAdminInfo($event)">
                            <input class="nome-prod-serv" id="nome-admin-editor" value="Admin's name"
                                placeholder="Admin's Name" type="text" v-model="adminInfoUpdated.realName"></input>
                            <input id="admin-address" value="Admin's Address" placeholder="Admin's Address"
                                type="text" v-model="adminInfoUpdated.address"></input>
                            <input id="admin-phone" value="Admin's Phone" placeholder="Admin's Phone" type="text"
                                v-model="adminInfoUpdated.phonenumber"></input>
                            <input id="admin-email" value="Admin's E-mail" placeholder="Admin's E-mail" type="text"
                                v-model="adminInfoUpdated.email"></input>
                            <input id="admin-nickname" value="Admin's Nickname" placeholder="Admin's Nickname"
                                type="text" v-model="adminInfoUpdated.username"></input>
                            <input id="admin-password" value="Admin's password" placeholder="Admin's password"
                                type="text" v-model="adminInfoUpdated.password"></input>
                            <button type="submit" class="save-btn">Save</button>   
                        </form>
                    </div>

                    <!--Div Inventario-->
                    <div class="inventory">
                        <button class="closeButton" v-on:click="setPage('main')">X</button>
                        <h2>Admins List</h2>

                        <button class="inventory-btn add-btn" @click="addAdminOption=true"><img class="img-btn" src="images/plus.png"></button>

                        <div class="lista-registros" >
                            <ul class="registro" v-for="(admin, index) in admins">
                                <li class="registro-nome">{{admin.username}}</li>
                                <button class="inventory-btn btn-del" @click="deleteAdmin(index)"><img class="img-btn"
                                        src="images/trash.png" ></button>
                                <button class="inventory-btn btn-edit" @click="selectadmin(index);addAdminOption=false"><img class="img-btn"
                                        src="images/edit.png"></button>
                                </ul>
                        </div> 

                    </div>
                </div>
            </div>

            <!--Div manage Clientes-->
            <div v-show="currPage == pages[5]">
                <br>
                <div class="manager">
                    <!--Div Editor-->
                    <div class="editor" v-if="addUserOption">
                        <h2>Create Customer</h2>
                        <form @submit="addUser($event)">
                            <img class="prod-serv-miniatura" v-if="urlPreview" :src="urlPreview">                        
                            <img class="prod-serv-miniatura" v-if="!urlPreview" :src="'http://localhost:3000/' + 'uploads/Default.png'">
                            <br>
                            <input type="file" @change="previewImage">
                            <input id="customer-address" value="Customer's Address" placeholder="Customer's Address"
                                type="text" v-model="userCreator.address"></input>
                            <input id="customer-phone" value="Customer's Phone" placeholder="Customer's Phone"
                                type="text" v-model="userCreator.phonenumber"></input>
                            <input id="customer-email" value="Customer's E-mail" placeholder="Customer's E-mail"
                                type="text" v-model="userCreator.email"></input>
                            <input id="customer-nickname" value="Customer's Nickname" placeholder="Customer's Nickname"
                                type="text" v-model="userCreator.username"></input>
                            <input id="customer-id" value="Customer's Password" placeholder="Customer's Password" 
                                type="text" v-model="userCreator.password"></input>                            
                            <button type="submit" class="save-btn">Save</button>
                        </form>
                    </div>
                    <div class="editor" v-else="addUserOption">
                        <h2>Edit Customer</h2>
 
                        <form @submit="updateuseradm($event)">
                            <img class="prod-serv-miniatura" v-if="urlPreview" :src="urlPreview">                        
                            <img class="prod-serv-miniatura" v-if="!urlPreview" :src="'http://localhost:3000/' + userInfoUpdated.profileImage">
                            <br>
                            <input type="file" @change="previewImage">                          
                            <input id="customer-username" value="userInfoUpdated.username" placeholder="Customer's Username - Permanent"
                                type="text" v-model="userInfoUpdated.dummyname"></input>                            
                            <input id="customer-address" value="Customer's Address" placeholder="Customer's Address"
                                type="text" v-model="userInfoUpdated.address"></input>
                            <input id="customer-phone" value="Customer's Phone" placeholder="Customer's Phone"
                                type="text" v-model="userInfoUpdated.phonenumber"></input>
                            <input id="customer-email" value="Customer's E-mail" placeholder="Customer's E-mail"
                                type="text" v-model="userInfoUpdated.email"></input>

                            <input id="customer-password" value="Customer's password" placeholder="Customer's password" 
                                type="text" v-model="userInfoUpdated.password"></input>                            
                            <button type="submit" class="save-btn">Save</button>
                        </form>
                        <button class="view-pets-btn" v-on:click="setPage('special'); getPets(selectedUser._id);">Pets</button>  
                    </div>
                    <!--Div Inventario-->
                    <div class="inventory">
                        <button class="closeButton" v-on:click="setPage('main')">X</button>
                        <h2>Customers List</h2>

                        <button class="inventory-btn add-btn" @click="addUserOption=true"><img class="img-btn" src="images/plus.png"></button>

                        <div class="lista-registros" >
                            <ul class="registro" v-for="(user, index) in users">
                                <li class="registro-nome">{{user.username}}</li>
                                <button class="inventory-btn btn-del" @click="deleteUser(index)"><img class="img-btn" src="images/trash.png" ></button>
                                <button class="inventory-btn btn-edit" @click="addUserOption=false; selectedUser=user;selectuser(index)"><img class="img-btn" src="images/edit.png"></button>
                                </ul>
                        </div> 
                            
                        </div>
                    </div>
                </div>
            </div>

            <!--Div Animais resgistrados para o Usuario-->
            <div v-show="currPage == pages[6]">
                <br>
                <div class="container-1 blue view-and-register">
                    <button class="closeButton principal" v-on:click="setPage('manage2')">X</button>
                    <h2>User's pets</h2>
                    <div v-if="selectedUser" class="scroll-container view-animals">
                        <div class="regAnimal" v-for="(pet, index) in pets">
                            <img class="small-img" :src="'http://localhost:3000/' + pet.petImage">
                            <ul class="list-card">
                                <li class="list-card-item">Name: {{ pet.name }}</li>
                                <li class="list-card-item">Species: {{ pet.species }}</li>
                                <li class="list-card-item">Breed: {{ pet.breed }}</li>
                                <li class="list-card-item">Age: {{ pet.age }}</li>
                            </ul>
                            <ul class="list-card">
                                <p>Reserves:</p>
                                <li class="list-card-item" v-for="service in pets[index].services">
                                    {{ service.name }}: {{ service.day }}, {{ service.hour }}h
                                </li>
                            </ul>
                            <button class="closeButton" class="button2"
                                @click="deletePet(index)">X</button>
                        </div>
                    </div>
                    
                    <div class="container-2 blue register-container">
                        <div class="column">
                            <img v-if="!urlPreview" class="small-img" src="images/pet.png">
                            <img v-if="urlPreview" class="small-img" :src="urlPreview">
                        </div>
                        <form @submit="validateFormAddPets($event); addPet(selectedUser._id);">
                            <div class="column">
                                <input class="input-1" type="text" name="pet-name" v-model="addPetForm.name"
                                    placeholder="Pet's name">
                                <input class="input-1" type="text" name="pet-species" v-model="addPetForm.species"
                                    placeholder="Pet's species">
                                <input type="file" @change="previewImage">    
                            </div>
                            <div class="column">
                                <input class="input-1" type="text" name="pet-breed" v-model="addPetForm.breed"
                                    placeholder="Pet's breed">
                                <input class="input-1" type="text" name="pet-age" v-model="addPetForm.age"
                                    placeholder="Pet's age">
                                <button type="submit" class="btn-1 green">Add Pet</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!--Div para mudar data Servicos-->
            <div v-show="currPage == pages[7]">
                <br>
                <div class="container-1 blue" id="adm-time-slots">
                    <button class="closeButton principal" v-on:click="setPage('service')">X</button>
                    <h2>Pet Shop's Time Slots</h2>

                    <div class="time-slots">
                        <button @click="previousCalendarPage" class="week-selector"><</button>
                        <button @click="nextCalendarPage" class="week-selector">></button>
                                   
                        <div v-if="dates && appointments" class="tabela">
                            <table>
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>{{ dates[0 + calendarPage * 7].getDate() + '/' + (Number(dates[0 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                        <th>{{ dates[1 + calendarPage * 7].getDate() + '/' + (Number(dates[1 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                        <th>{{ dates[2 + calendarPage * 7].getDate() + '/' + (Number(dates[2 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                        <th>{{ dates[3 + calendarPage * 7].getDate() + '/' + (Number(dates[3 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                        <th>{{ dates[4 + calendarPage * 7].getDate() + '/' + (Number(dates[4 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                        <th>{{ dates[5 + calendarPage * 7].getDate() + '/' + (Number(dates[5 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>

                                        <th>{{ dates[6 + calendarPage * 7].getDate() + '/' + (Number(dates[6 + calendarPage * 7].getMonth()) + Number(1)).toString() }}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="horario-dado">9h - 10h</td>
                                        <!-- renderiza cada linha do calendário de acordo com o vetor de appointments -->
                                        <td v-for="index in 7" :key="index">
                                            <button @click="toggleSelect(index, 1)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].isSelected,
                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].status">
                                                LIVRE
                                            </button>

                                            <button @click="toggleSelect(index, 1)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].isSelected,
                                             'ocupado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].isSelected}" v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].status">
                                              
                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].servicename}}<br>

                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].imageurl"><br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].petname}}<br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (1 - 1)].ownername}}<br>
                                            </button>                                                            
                                        </td>        
                                    </tr>
                                    <tr>
                                        <td class="horario-dado">10h - 11h</td>
                                        <td v-for="index in 7" :key="index">
                                            <button @click="toggleSelect(index, 2)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].isSelected,
                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].status">
                                                LIVRE
                                            </button>

                                            <button @click="toggleSelect(index, 2)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].isSelected,
                                             'ocupado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].isSelected}" v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].status">
                                              
                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].servicename}}<br>

                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].imageurl"><br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].petname}}<br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (2 - 1)].ownername}}<br>
                                            </button>                                                            
                                        </td>    
                                    </tr>
                                    <tr>
                                        <td class="horario-dado">11h - 12h</td>

                                        <td v-for="index in 7" :key="index">
                                            <button @click="toggleSelect(index, 3)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].isSelected,
                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].status">
                                                LIVRE
                                            </button>

                                            <button @click="toggleSelect(index, 3)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].isSelected,
                                             'ocupado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].isSelected}" v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].status">
                                              
                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].servicename}}<br>

                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].imageurl"><br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].petname}}<br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (3 - 1)].ownername}}<br>
                                            </button>                                                            
                                        </td>       
                                    </tr>
                                    <tr>
                                        <td class="horario-dado">12h - 13h</td>

                                        <td v-for="index in 7" :key="index">
                                            <button @click="toggleSelect(index, 4)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].isSelected,
                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].status">
                                                LIVRE
                                            </button>

                                            <button @click="toggleSelect(index, 4)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].isSelected,
                                             'ocupado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].isSelected}" v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].status">
                                              
                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].servicename}}<br>

                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].imageurl"><br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].petname}}<br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (4 - 1)].ownername}}<br>
                                            </button>                                                            
                                        </td>    
                                    </tr>
                                    <tr>
                                        <td class="horario-dado">13h - 14h</td>

                                        <td v-for="index in 7" :key="index">
                                            <button @click="toggleSelect(index, 5)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].isSelected,
                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].status">
                                                LIVRE
                                            </button>

                                            <button @click="toggleSelect(index, 5)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].isSelected,
                                             'ocupado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].isSelected}" v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].status">
                                              
                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].servicename}}<br>

                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].imageurl"><br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].petname}}<br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (5 - 1)].ownername}}<br>
                                            </button>                                                            
                                        </td>    
                                    </tr>
                                    <tr>
                                        <td class="horario-dado">14h - 15h</td>

                                        <td v-for="index in 7" :key="index">
                                            <button @click="toggleSelect(index, 6)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].isSelected,
                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].status">
                                                LIVRE
                                            </button>

                                            <button @click="toggleSelect(index, 6)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].isSelected,
                                             'ocupado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].isSelected}" v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].status">
                                              
                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].servicename}}<br>

                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].imageurl"><br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].petname}}<br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (6 - 1)].ownername}}<br>
                                            </button>                                                            
                                        </td>       
                                    </tr>
                                    <tr>
                                        <td class="horario-dado">15h - 16h</td>

                                        <td v-for="index in 7" :key="index">
                                            <button @click="toggleSelect(index, 7)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].isSelected,
                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].status">
                                                LIVRE
                                            </button>

                                            <button @click="toggleSelect(index, 7)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].isSelected,
                                             'ocupado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].isSelected}" v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].status">
                                              
                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].servicename}}<br>

                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].imageurl"><br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].petname}}<br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (7 - 1)].ownername}}<br>
                                            </button>                                                            
                                        </td>     
                                    </tr>
                                    <tr>
                                        <td class="horario-dado">16h - 17h</td>

                                        <td v-for="index in 7" :key="index">
                                            <button @click="toggleSelect(index, 8)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].isSelected,
                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].status">
                                                LIVRE
                                            </button>

                                            <button @click="toggleSelect(index, 8)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].isSelected,
                                             'ocupado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].isSelected}" v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].status">
                                              
                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].servicename}}<br>

                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].imageurl"><br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].petname}}<br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (8 - 1)].ownername}}<br>
                                            </button>                                                            
                                        </td>       
                                    </tr>
                                    <tr>
                                        <td class="horario-dado">17h - 18h</td>

                                         <td v-for="index in 7" :key="index">
                                            <button @click="toggleSelect(index, 9)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].isSelected,
                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].status">
                                                LIVRE
                                            </button>

                                            <button @click="toggleSelect(index, 9)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].isSelected,
                                             'ocupado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].isSelected}" v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].status">
                                              
                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].servicename}}<br>

                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].imageurl"><br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].petname}}<br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (9 - 1)].ownername}}<br>
                                            </button>                                                            
                                        </td>        
                                    </tr>

                                    <tr>
                                        <td class="horario-dado">18h - 19h</td>

                                        <td v-for="index in 7" :key="index">
                                            <button @click="toggleSelect(index, 10)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].isSelected,
                                             'liberado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].isSelected}" v-if="!appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].status">
                                                LIVRE
                                            </button>

                                            <button @click="toggleSelect(index, 10)" v-bind:class="{'selecionado': appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].isSelected,
                                             'ocupado': !appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].isSelected}" v-if="appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].status">
                                              
                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].servicename}}<br>

                                              <img class="img-min" :src="'http://localhost:3000/' + appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].imageurl"><br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].petname}}<br>

                                              {{appointments.timeTable[(calendarPage*7 + index - 1)*10 + (10 - 1)].ownername}}<br>
                                            </button>                                                            
                                        </td>       
                                    </tr>                                                                                                        
                                </tbody>
                            </table>
                        </div>
                    </div> 

                    <div id="adm-btns">
                        <button @click="freeAppointment()" class="btn-1 red">Release Time Slot</button>
                    </div>
                </div>
            </div>

            <!--Div "Voce tem certeza" Presente em varios divs diferentes-->
            <div id="confirmmodal" class="big-box-modal" style="display: none;">
                <div class="pop-up-peq">
                    <button class="closeButton" id="confirmclose" onclick="closer2()">X</button>
                    <p>Tem certeza que deseja realizar essa ação?</p>
                    <button class="btn-1 green">Sim</button>
                    <button class="btn-1 red">Não</button>
                </div>
            </div>
        </div>

        <!--o VUE faz a implementação do SPA-->
        <script src="https://cdn.jsdelivr.net/npm/vue"></script>
        <script>
            new Vue({
                el: "#app",

                data: {
                    // usuário selecionado (clicar no lápis) atualmente
                    selectedUser: null,

                    // id do pet selecionado na hora de comprar um serviço
                    selectedPet: null,

                    // appointment selecionado no calendário
                    selectedAppointment: null,

                    // vetor com as datas dos próximos 700 dias
                    dates: null,

                    // indica a semana do calendário que está sendo visualizada no momento
                    calendarPage: 0,  

                    // armazena um arquivo imagem
                    imageFile: null,

                    // URL do preview de uma imagem
                    urlPreview: null,

                    qtdSelected: 1,  // quantidade do produto selecionado que o usuário vai comprar

                    fetched: {},

                    erros: [],  // armazena erros de validação de formulário

                    myCart: {
                        total: 0,
                        receipt: []
                    },

                    userInfo: {
                        _id: "",
                        username: "",
                        phonenumber: "",
                        address: "",
                        email: "",
                        password: "",
                        imageURL: "",
                        realName: ""
                    },

                    addPetForm: {
                        name: "",
                        species: "",
                        breed: "",
                        age: ""
                    },

                    // Para usar no form de atualização dos dados (página "Update Info" do cliente)
                    userInfoUpdated: {
                        _id:"",
                        password: "",
                        phonenumber: "",
                        address: "",
                        email: "",
                        profileImage: "",
                        username: "",
                        dummyname:""
                    },

                    //Informacao login
                    admincheck: false,

                    products: [],
                    services: [],
                    admins: [],
                    users: [],
                    pets: [],  // pets do usuário
                    appointments: null,  // appointments marcados

                    selectedProduct: {},
                    selectedService: {},

                    //informacao SPA
                    currPage: "login",
                    currUser: "N",

                    //"base de dados"
                    //Paginas que temos
                    pages: ["login", "main", "products", "service", "manage1", "manage2", "special", "special2", "checkout"],
                    //tipos de usuarios
                    usertypes: ["Cli", "Adm", "N"],
                    //dependendo do tipo de usuario, a pagina a ser mostrada sera outra
                    myerror: "",

                    //Data criada pelo luis a partir de aqui:
                    addAdminOption: true, //seleciona a opcao add admin ao inves de edit admin
                    addUserOption: true, //o mesmo que o anterior
                    addProductOption: true,
                    addServiceOption: true,

                    adminInfo: {
                        _id: "",
                        username: "",
                        phonenumber: "",
                        address: "",
                        email: "",
                        password: "",
                        imageURL: "",
                        realName: ""
                    },

                    adminInfoUpdated: {
                        _id:"",
                        realName: "",
                        address: "",
                        phonenumber: "",
                        email: "",
                        username: "",
                        password: "",
                        profileImage: ""
                    },
                    productInfo: {
                        _id: "",
                        name: "",
                        price: "",
                        description: "",
                        stock: "",
                        productImage: "",
                        bought:""
                    },
                    productInfoUpdated: {
                        _id:"",
                        name: "",
                        price: "",
                        description: "",
                        stock: "",
                        productImage: "",
                        bought:""
                    },

                    //criadas por Lucas 2
                    userCreator: {
                        _id: "",
                        username: "",
                        phonenumber: "",
                        address: "",
                        email: "",
                        password: "",
                        imageURL: "",
                        realName: ""
                    },

                    serviceInfo: {
                        _id:"",
                        name:"",
                        description: "",
                        serviceImage:"",
                        bought:"",
                        price: "",
                    },

                    serviceInfoUpdated:{
                        _id:"",
                        name:"",
                        description: "",
                        serviceImage:"",
                        bought:"",
                        price: "",
                    },

                },

                methods: {

                    // função para liberar o appointment selecionado 
                    freeAppointment: async function(){
                        // libera um appointment no vetor da base
                        if(this.selectedAppointment != null){                                    
                            try{
                                // fazer request para liberar o appointment
                                let resp = await fetch("http://localhost:3000/appointments/free/", {
                                    method: "POST",
                                    headers: {
                                        'Content-type': 'application/json'
                                    },
                                    body: JSON.stringify({  // conteúdo enviado (data e hora baseada na seleção do comentário)
                                        day: this.selectedAppointment.day,
                                        hour: this.selectedAppointment.hour
                                    })                                            
                                });

                                //se a requisição for bem sucedida...
                                if (resp.ok){
                                    console.log("The appointment is now free");
                                    this.getAppointments();                               
                                }
                                else{  //se não for...
                                    alert("Something went wrong. Try again later");
                                }
                            }
                            catch(e){
                                alert("Error " + e);
                            }
                        }
                        else{
                            alert("Select a slot first, please");
                        }                        
                    },                    

                    // adiciona um produto à base (função de admin)
                    addProduct: async function(e){
                        e.preventDefault();
                        try {
                            // faz um post para registrar produto na base
                            // conteúdo enviado (do form)
                            let myheaders = new Headers({ "Content-Type": "application/json", });

                            let resp = await fetch("http://localhost:3000/products/", {
                            method: "POST",
                            headers: myheaders,
                            body: JSON.stringify({  
                                name: this.productInfo.name,
                                price: this.productInfo.price,
                                description: this.productInfo.description,
                                stock: this.productInfo.stock
                                })
                            });                           
                            // se a requisição for bem-sucedida
                            if (resp.ok) {
                                 this.products.push(await resp.json());
                                alert("Your product has been succesfully added!");
                                
                             }
                             else {  // se não for...
                                 alert("Something went wrong. Try again later");
                            }
        
                        }
                        catch (e) {
                             alert("Error: " + e);
                            }
                        // imagem do admin
                        if(this.imageFile != null){
                            try {
                                if (!this.erros.length) {
                                        let form = new FormData();
                                        form.append('Image', this.imageFile);
                                    console.log("test" + this.products.length);
                                    // faz um post para registrar um pet na base
                                    let resp = await fetch("http://localhost:3000/products/image/" + this.products[this.products.length-1]._id, {
                                        method: "POST",
                                        body: form
                                    });

                                    // se a requisição for bem-sucedida
                                    if (resp.ok) {
                                        let url = await resp.json();
                                        this.productInfo.productImage = url.productImage;
                                        alert("Image succesfully uploaded: " + this.productInfo.productImage);
                                        console.log("Image succesfully uploaded: " + this.productInfo.productImage);
                                    }
                                    else {  // se não for...
                                        alert("Could not upload the image");
                                    }
                                }
                            }
                            catch (e) {
                                alert("Error: " + e);
                            }

                            this.imageFile = null;
                            this.urlPreview = null;                          
                        }    
                        },

                    // deletar um produto na base
                    deleteproduct: async function (index) {
                        try {
                            // faz um request para deletar o produto
                            let resp = await fetch("http://localhost:3000/admins/" + this.products[index]._id, {
                                method: "DELETE"
                            });

                            // se a requisição foi bem-sucedida:
                            if (resp.ok) {
                                this.products.splice(index, 1);

                                alert("Admin deleted succesfully!")
                            }
                            else {  // se não for, exibe a mensagem no console
                                alert("Something went wrong. Try again later!")
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    // atualiza informações sobre o produto a nível do browser 
                    setproductinfo: async function(index){
                        this.productInfoUpdated._id = this.products[index]._id;
                        this.productInfoUpdated.name = this.products[index].name;
                        this.productInfoUpdated.description = this.products[index].description;
                        this.productInfoUpdated.price = this.products[index].price;
                        this.productInfoUpdated.stock = this.products[index].stock;
                        this.productInfoUpdated.productImage = this.products[index].productImage;
                        this.productInfoUpdated.bought = this.products[index].bought;
                        console.log(this.products[index]._id + "Id que queremos mudar");
                    },

                    // atualiza informações sobre o serviço a nível do browser
                    setserviceinfo: async function(index){
                        this.serviceInfoUpdated._id = this.services[index]._id;
                        this.serviceInfoUpdated.name = this.services[index].name;
                        this.serviceInfoUpdated.price = this.services[index].price;
                        this.serviceInfoUpdated.description = this.services[index].description;
                        this.serviceInfoUpdated.bought = this.services[index].bought;
                        this.serviceInfoUpdated.serviceImage = this.services[index].ServiceImage;
                        console.log(this.services[index].ServiceImage);
                        console.log(this.services[index]._id);
                    },

                    // atualiza informações sobre um produto no servidor
                    updateProductInfo: async function (e) {
                        e.preventDefault();
                        // atualiza as informações colocados no formulário
                        try {
                            console.log(this.productInfoUpdated._id);

                            // para atualizar, fazemos um PUT request
                            let resp = await fetch("http://localhost:3000/products/update/" + this.productInfoUpdated._id, {
                                method: "PUT",
                                headers: {
                                    'Content-type': 'application/json'
                                },
                                body: JSON.stringify({  // conteúdo enviado (do form)
                                name: this.productInfoUpdated.name,
                                price: this.productInfoUpdated.price,
                                description: this.productInfoUpdated.description,
                                stock: this.productInfoUpdated.stock,
                                })
                            });

                            // se a requisição for bem-sucedida
                            if (resp.ok) {
                                console.log("all is good" + await resp.json());
                                alert("The information has been succesfully updated!");
                            }
                            else {  // se não for...
                                alert("Something went wrong. Try again later!");
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }

                        // atualiza a imagem do produto
                        if(this.imageFile != null){
                            try {
                                if (!this.erros.length) {
                                        let form = new FormData();
                                        form.append('Image', this.imageFile);

                                    // faz um post para registrar um pet na base
                                    let resp = await fetch("http://localhost:3000/products/image/" + this.productInfoUpdated._id, {
                                        method: "POST",
                                        body: form
                                    });

                                    // se a requisição for bem-sucedida
                                    if (resp.ok) {
                                        let url = await resp.json();
                                        this.productInfoUpdated.productImage = url.productImage;
                                        console.log("Image succesfully uploaded: " + this.productInfoUpdated.productImage);
                                    }
                                    else {  // se não for...
                                        alert("Could not upload the image");
                                    }
                                }
                            }
                            catch (e) {
                                alert("Error: " + e);
                            }

                            this.imageFile = null;
                            this.urlPreview = null;                           
                        }
                        this.getEveryProduct();
                    },

                    // obtém todos os usuários cadastrados
                    getEveryUser: async function () {
                        try {
                            // faz um get request para obter os usuários
                            let resp = await fetch("http://localhost:3000/users/");

                            // se a requisição for bem-sucedida
                            if (resp.ok) {
                                this.users = await resp.json();
                            }
                            else {  // se não for...
                                alert("Something went wrong. Try again later!");
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    // adiciona um usuário à base (apenas para uso do admin)
                    addUser: async function (e) {
                        e.preventDefault();
                        let created = 0;
                        try {

                            //tentamos pegar um usuario ja com esse nome, se nao houver, seguimos
                            this.fetched = await fetch("http://localhost:3000/users/" + this.userCreator.username, { method: 'GET' });
                            this.fetched = await this.fetched.json();

                            console.log('Fetch result:' + JSON.stringify(this.fetched));

                            //se nao achamos alguem com esse nome, eh valido    
                            if (this.fetched.username == "NOTFOUND") {

                                let myheaders = new Headers({ "Content-Type": "application/json", });

                                let resp = await fetch("http://localhost:3000/users/", {
                                    method: 'POST',
                                    headers: myheaders,
                                    body: JSON.stringify({
                                        "username": this.userCreator.username,
                                        "email": this.userCreator.email,
                                        "phonenumber": this.userCreator.phonenumber,
                                        "password": this.userCreator.password,
                                        "address": this.userCreator.address
                                    })

                                });

                                if(resp.ok){
                                    created = 1;
                                    console.log('Success');
                                    this.users.push(await resp.json());
                                    alert("User Created Successfully");
                                }
                                else{
                                    alert("Failed to Create User, try another time");
                                }
                            
                            }
                            else {
                                alert("Username Already in Use");
                            }

                        } catch (error) {
                            console.log(error);
                        }
                       // imagem do usuário
                        if(this.imageFile != null && created == 1){
                            try {
                                        let form = new FormData();
                                        form.append('Image', this.imageFile);

                                    // faz um post para registrar um pet na base
                                    let resp = await fetch("http://localhost:3000/users/image/" + this.users[this.users.length -1]._id, {
                                        method: "POST",
                                        body: form
                                    });

                                    // se a requisição for bem-sucedida
                                    if (resp.ok) {
                                        let url = await resp.json();
                                        this.userCreator.imageURL = url.profileImage;
                                        alert("Image succesfully uploaded: " + this.userCreator.imageURL);
                                        console.log("Image succesfully uploaded: " + this.userCreator.imageURL);
                                    }
                                    else {  // se não for...
                                        alert("Could not upload the image");
                                    }
                            }
                            catch (e) {
                                alert("Error: " + e);
                            }

                            this.imageFile = null;
                            this.urlPreview = null;                           
                        }
                    },
                    
                    // deleta um usuário da base            
                    deleteUser: async function (index) {
                        try {

                            let resp = await fetch("http://localhost:3000/users/" + this.users[index]._id, {
                                method: "DELETE"
                            });

                            // se a requisição foi bem-sucedida:
                            if (resp.ok) {
                                this.users.splice(index, 1);

                                alert("Customer deleted succesfully!")
                            }
                            else {  // se não for, exibe a mensagem no console
                                alert("Something went wrong. Try again later!")
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    // deleta um serviço da base
                    deleteservice: async function(index){
                        try {

                            let resp = await fetch("http://localhost:3000/services/" + this.services[index]._id, {
                                method: "DELETE"
                            });

                            // se a requisição foi bem-sucedida:
                            if (resp.ok) {
                                this.services.splice(index, 1);

                                alert("Service deleted succesfully!")
                            }
                            else {  // se não for, exibe a mensagem no console
                                alert("Something went wrong. Try again later!")
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    // atualiza informações de um usuário (usado pelo admin)
                    updateuseradm: async function(e){
                        e.preventDefault();
                        try {
                            console.log(this.userInfoUpdated._id);

                            let resp = await fetch("http://localhost:3000/users/update/" + this.userInfoUpdated._id, {
                                method: "PUT",
                                headers: {
                                    'Content-type': 'application/json'
                                },
                                body: JSON.stringify({  // conteúdo enviado (do form)
                                    username: this.userInfoUpdated.username,
                                    password: this.userInfoUpdated.password,
                                    phonenumber: this.userInfoUpdated.phonenumber,
                                    address: this.userInfoUpdated.address,
                                    email: this.userInfoUpdated.email
                                })
                            });

                            // se a requisição for bem sucedida
                            if(resp.ok){
                                alert("User Information Updated Successfully");
                            }
                            else {  // se não for...
                                alert("Something went wrong. Try again later!");
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }

                        // atualiza a imagem do usuário
                        if(this.imageFile != null){
                            try {
                                if (!this.erros.length) {
                                        let form = new FormData();
                                        form.append('Image', this.imageFile);

                                    // faz um post para upar uma imagem no servidor
                                    let resp = await fetch("http://localhost:3000/users/image/" + this.userInfoUpdated._id, {
                                        method: "POST",
                                        body: form
                                    });

                                    // se a requisição for bem-sucedida
                                    if (resp.ok) {
                                        let url = await resp.json();
                                        this.userInfoUpdated.profileImage = url.profileImage;
                                        console.log("Image succesfully uploaded: " + this.userInfo.imageURL);
                                        alert("Image succesfully uploaded: " + this.userInfoUpdated.profileImage);
                                    }
                                    else {  // se não for...
                                        alert("Could not upload the image");
                                    }
                                }
                            }
                            catch (e) {
                                alert("Error: " + e);
                            }

                            this.imageFile = null;
                            this.urlPreview = null;                          
                        }
                        this.getEveryUser();
                    },

                    // obtém todos os administradores
                    getEveryAdmin: async function () {
                        try {
                            // faz um get request para obter os administradores
                            let resp = await fetch("http://localhost:3000/admins/");

                            // se a requisição for bem-sucedida
                            if (resp.ok) {
                                this.admins = await resp.json();
                            }
                            else {  // se não for...
                                alert("Something went wrong. Try again later!");
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    // adiciona um administrador    
                    addAdmin: async function(e){
                        e.preventDefault();
                        try {
                            // faz um post para registrar o admin na base
                            let resp = await fetch("http://localhost:3000/admins/", {
                            method: "POST",
                            headers: {
                                'Content-type': 'application/json'},
                            body: JSON.stringify({  // conteúdo enviado (do form)
                                realName: this.adminInfo.realName,
                                username: this.adminInfo.username,
                                email: this.adminInfo.email,
                                phonenumber: this.adminInfo.phonenumber,
                                address: this.adminInfo.address,
                                password: this.adminInfo.password

                                })
                            });   

                            // se a requisição for bem-sucedida
                            if (resp.ok) {
                                this.admins.push(await resp.json());
                                console.log('Ok!');
                                alert("Your admin has been succesfully added!");
                                
                             }
                             else {  // se não for...
                                 console.log('Not Ok');
                                 alert("Something went wrong. Try again later");
                            }
        
                        }
                        catch (e) {
                            console.log("error" + e);
                             alert("Error: " + e);
                            }
                        // upa no servidor a imagem do admin
                        if(this.imageFile != null){
                            try {
                                
                                    let form = new FormData();
                                    form.append('Image', this.imageFile);
                        
                                    // faz um post para upar a imagem do admin na base
                                    let resp = await fetch("http://localhost:3000/admins/image/" + this.admins[this.admins.length-1]._id, {
                                        method: "POST",
                                        body: form
                                    });

                                    // se a requisição for bem-sucedida
                                    if (resp.ok) {
                                        let url = await resp.json();
                                        this.adminInfo.imageURL = url.profileImage;
                                        console.log("Image succesfully uploaded: " + this.adminInfo.imageURL);
                                    }
                                    else {  // se não for...
                                        alert("Could not upload the image");
                                    }
                                
                            }
                            catch (e) {
                                alert("Error: " + e);
                            }

                            this.imageFile = null;
                            this.urlPreview = null;                          
                        } 

                        },
                    
                    // seleciona um usuário
                    selectuser: async function(index){
                        this.userInfoUpdated.dummyname = this.users[index].username;
                        this.userInfoUpdated.username = this.users[index].username;
                        this.userInfoUpdated.password = this.users[index].password; 
                        this.userInfoUpdated.email = this.users[index].email;
                        this.userInfoUpdated.address = this.users[index].address;
                        this.userInfoUpdated.phonenumber = this.users[index].phonenumber;
                        this.userInfoUpdated.profileImage = this.users[index].profileImage;
                        this.userInfoUpdated._id = this.users[index]._id;
                        console.log(this.users[index].profileImage);
                        console.log(this.users[index]._id);
                    },

                    // seleciona um admin
                    selectadmin: async function(index){
                        this.adminInfoUpdated.realName = this.admins[index].realName;
                        this.adminInfoUpdated.username = this.admins[index].username;
                        this.adminInfoUpdated.email = this.admins[index].email;
                        this.adminInfoUpdated.phonenumber = this.admins[index].phonenumber;
                        this.adminInfoUpdated.address = this.admins[index].address;
                        this.adminInfoUpdated.password = this.admins[index].password;
                        this.adminInfoUpdated._id = this.admins[index]._id;
                        this.adminInfoUpdated.profileImage = this.admins[index].profileImage;
                        console.log(this.admins[index].profileImage);
                    },

                    //deleta um administrador
                    deleteAdmin: async function (index) {
                        try {

                            let resp = await fetch("http://localhost:3000/admins/" + this.admins[index]._id, {
                                method: "DELETE"
                            });

                            // se a requisição foi bem-sucedida:
                            if (resp.ok) {
                                this.admins.splice(index, 1);

                                alert("Admin deleted succesfully!")
                            }
                            else {  // se não for, exibe a mensagem no console
                                alert("Something went wrong. Try again later!")
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    // atualiza informações de um administrador
                    updateAdminInfo: async function (e) {
                        // atualiza as informações colocados no formulário
                        e.preventDefault();
                        try {
                            
                            console.log(this.adminInfoUpdated._id);
                            console.log(this.adminInfoUpdated.profileImage);

                            let resp = await fetch("http://localhost:3000/admins/update/" + this.adminInfoUpdated._id, {
                                method: "PUT",
                                headers: {
                                    'Content-type': 'application/json'
                                },
                                // conteúdo enviado (do form)
                                body: JSON.stringify({  
                                realName: this.adminInfoUpdated.realName,
                                username: this.adminInfoUpdated.username,
                                email: this.adminInfoUpdated.email,
                                phonenumber: this.adminInfoUpdated.phonenumber,
                                address: this.adminInfoUpdated.address,
                                password: this.adminInfoUpdated.password
                                })
                            });
                            console.log("Success!");
                            alert("Admin Info Updated Sucessfully!");
                        }
                        catch (e) {
                            console.log("error" + e);
                            alert("Error: " + e);
                        }

                        
                        // atualiza a imagem do adm
                        if(this.imageFile != null){
                            try {
                                if (!this.erros.length) {
                                        let form = new FormData();
                                        form.append('Image', this.imageFile);

                                    // faz um post para upar um adm na base
                                    let resp = await fetch("http://localhost:3000/admins/image/" + this.adminInfoUpdated._id, {
                                        method: "POST",
                                        body: form
                                    });

                                    // se a requisição for bem-sucedida
                                    if (resp.ok) {
                                        let url = await resp.json();
                                        this.adminInfoUpdated.profileImage = url.profileImage;
                                        alert("Image succesfully uploaded: " + this.adminInfoUpdated.profileImage);
                                        console.log("Image succesfully uploaded: " + this.adminInfoUpdated.profileImage);
                                    }
                                    else {  // se não for...
                                        alert("Could not upload the image");
                                    }
                                }
                            }
                            catch (e) {
                                alert("Error: " + e);
                            }
                            
                            this.imageFile = null;
                            this.urlPreview = null;                           
                        }
                        //re att vetor 
                        this.getEveryAdmin();
                    },

                    // adiciona um serviço
                    addService: async function(e){
                        e.preventDefault();
                        try {
                            // faz um post para registrar serviço na base
                            // conteúdo enviado (do form)
                            let myheaders = new Headers({ "Content-Type": "application/json", });

                            let resp = await fetch("http://localhost:3000/services/", {
                            method: "POST",
                            headers: myheaders,
                            body: JSON.stringify({  
                                name: this.serviceInfo.name,
                                price: this.serviceInfo.price,
                                description: this.serviceInfo.description,
                                })
                            });                           
                            // se a requisição for bem-sucedida
                            if (resp.ok) {

                                 this.services.push(await resp.json());
                                alert("Your service has been succesfully added!");
                                
                             }
                             else {  // se não for...
                                 alert("Something went wrong. Try again later");
                            }
        
                        }
                        catch (e) {
                             alert("Error: " + e);
                            }
                        // imagem do serviço
                        if(this.imageFile != null){
                            try {
                                if (!this.erros.length) {
                                        let form = new FormData();
                                        form.append('Image', this.imageFile);
                                        console.log("test " + this.services.length);
                                        console.log("ip " + this.services[this.services.length-1]._id);
                                    // faz um post para upar a imagem
                                    let resp = await fetch("http://localhost:3000/services/image/" + this.services[this.services.length-1]._id, {
                                        method: "POST",
                                        body: form
                                    });

                                    // se a requisição for bem-sucedida
                                    if (resp.ok) {
                                        let url = await resp.json();
                                        this.serviceInfo.serviceImage = url.ServiceImage;
                                        alert("Image succesfully uploaded: " + this.serviceInfo.serviceImage);
                                        console.log("Image succesfully uploaded: " + this.serviceInfo.serviceImage);
                                    }
                                    else {  // se não for...
                                        alert("Could not upload the image");
                                    }
                                }
                            }
                            catch (e) {
                                alert("Error: " + e);
                            }

                            this.imageFile = null;
                            this.urlPreview = null;                          
                        }
                    },

                    // atualiza informações de um serviço
                    editserviceInfo: async function(e){
                        e.preventDefault();
                        // atualiza as informações colocados no formulário
                        try {
                            console.log(this.serviceInfoUpdated._id);

                            let resp = await fetch("http://localhost:3000/services/update/" + this.serviceInfoUpdated._id, {
                                method: "PUT",
                                headers: {
                                    'Content-type': 'application/json'
                                },
                                body: JSON.stringify({  // conteúdo enviado (do form)
                                name: this.serviceInfoUpdated.name,
                                price: this.serviceInfoUpdated.price,
                                description: this.serviceInfoUpdated.description,
                                })
                            });

                            // se a requisição for bem sucedida
                            if (resp.ok) {
                                console.log("all is good" + await resp.json());
                                alert("The information has been succesfully updated!");
                            }
                            else {  // se não for...
                                alert("Something went wrong. Try again later!");
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }

                        // atualiza a imagem do serviço
                        if(this.imageFile != null){
                            try {
                                if (!this.erros.length) {
                                        let form = new FormData();
                                        form.append('Image', this.imageFile);

                                    // faz um post para upar a imagem
                                    let resp = await fetch("http://localhost:3000/services/image/" + this.serviceInfoUpdated._id, {
                                        method: "POST",
                                        body: form
                                    });

                                    // se a requisição for bem-sucedida
                                    if (resp.ok) {
                                        let url = await resp.json();
                                        this.serviceInfoUpdated.serviceImage = url.ServiceImage;
                                        console.log("Image succesfully uploaded: " + this.serviceInfoUpdated.serviceImage);
                                    }
                                    else {  // se não for...
                                        alert("Could not upload the image");
                                    }
                                }
                            }
                            catch (e) {
                                alert("Error: " + e);
                            }

                            this.imageFile = null;
                            this.urlPreview = null;                           
                        }
                        this.getEveryService();
                    },

                    // administra a ação de selecionar no calendário
                    toggleSelect: function(index, hora){
                        if(this.selectedAppointment != null){
                            this.selectedAppointment.isSelected = false;
                        }
                        this.appointments.timeTable[(this.calendarPage*7 + index - 1)*10 + (hora - 1)].isSelected = true;
                        this.selectedAppointment = this.appointments.timeTable[(this.calendarPage*7 + index - 1)*10 + (hora - 1)];
                        this.selectedAppointment.day = this.calendarPage*7 + index;
                        this.selectedAppointment.hour = hora;

                        // provoca uma atualização na renderização do calendário
                        this.calendarPage = this.calendarPage++;
                        this.calendarPage = this.calendarPage--;
                    },

                    // vai para a página anterior do calendário
                    nextCalendarPage: function(){
                        if(this.calendarPage < 9){
                            this.calendarPage++;
                        }
                    },

                    // vai para a próxima página do calendário
                    previousCalendarPage: function(){
                        if(this.calendarPage > 0){
                            this.calendarPage--;    
                        }
                    },

                    // obtém as datas dos próximos 700 dias e coloca no vetor "dates"
                    getDates: function(){
                        this.dates = [];

                        for(var i = 0; i < 70; i++){
                            this.dates.push(new Date());                           
                            this.dates[i].setDate(this.dates[0].getDate() + i);    
                        }
                    },

                    // obtém todos os appointments do pet shop
                    getAppointments: async function () {
                        this.getDates()

                        try {
                            // faz um get request para obter os appointments
                            let resp = await fetch("http://localhost:3000/appointments/");

                            // se a requisição for bem-sucedida
                            if (resp.ok) {
                                this.appointments = await resp.json();
                                for(var i = 0; i < this.appointments.timeTable.length; i++){
                                    this.appointments.timeTable[i].isSelected = false;
                                }
                                if(this.appointments.name === "NOTFOUND"){  // vetor vazio
                                    this.appointments = [];
                                }
                            }
                            else {  // se não for...
                                console.log("Couldn't get the appointments");
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    // cria uma object URL para usar como prévia de uma imagem que será upada
                    previewImage: function(e){
                        const file = e.target.files[0];
                        this.urlPreview = URL.createObjectURL(file);
                        this.imageFile = file;                        
                    },

                    // esvazia o carrinho do usuário
                    emptyCart: function(){
                        if(this.myCart.total != 0){
                            this.myCart.total = 0;
                            this.myCart.receipt = [];
                        }
                        else{  // se o carrinho já estiver vazio, temos a seguinte mensagem
                            alert("Your cart is already empty!");
                        }
                    },

                    // faz o checkout dos produtos/serviços que estão no carrinho
                    // serviço - marca o dia e a hora no backend
                    // produto - subtrai a quantidade disponível
                    checkout: async function () {
                        if (this.myCart.total === 0) {  // carrinho vazio
                            alert("Your cart is empty!");
                        }
                        else {
                            // para cada elemento no carrinho
                            for (var i = 0; i < this.myCart.receipt.length; i++) {
                                if (this.myCart.receipt[i].type === "product") {  // se o item for um produto...
                                    try {
                                        // faz uma requisição para descontar as qtds dos produtos na base de dados
                                        let resp = await fetch("http://localhost:3000/products/sell/" + this.myCart.receipt[i].id);

                                        // se a requisição for bem-sucedida
                                        if (resp.ok) {
                                            console.log("Success!")
                                        }
                                        else {  // se não for...
                                            alert("Couldn't finish the transaction of the following item: " + this.myCart.receipt[i].name);
                                        }
                                    }
                                    catch (e) {
                                        alert("Error " + e);
                                    }
                                }
                                if (this.myCart.receipt[i].type === "service") {  // se o item for um serviço...
                                    // insere um appointment no registro do pet
                                    try{
                                        // fazer request para registrar um appointment
                                        const day = this.myCart.receipt[i].appointment.day;
                                        var hour = this.myCart.receipt[i].appointment.hour;
                                        hour = hour + 8;

                                        let resp = await fetch("http://localhost:3000/pets/reserve/", {
                                            method: "PUT",
                                            headers: {
                                                'Content-type': 'application/json'
                                            },
                                            body: JSON.stringify({  // conteúdo enviado (do form)
                                                // montar corpo da requisição
                                                id: this.myCart.receipt[i].appointment.petid,  // id do pet
                                                serviceId: this.myCart.receipt[i].id,
                                                day: Number(this.dates[day - 1].getDate()),
                                                hour: Number(hour),
                                                name: this.myCart.receipt[i].name                                                
                                            })                                            
                                        });


                                        //se a requisição for bem sucedida
                                        if (resp.ok){
                                            console.log("Success!");
                                        }
                                        else{
                                            alert("Couldn't finish the transaction of a service");
                                        }
                                    }
                                    catch(e){
                                        alert("Error " + e);
                                    }    
                                    
                                    // registra um appointment na coleção de appointments                                    
                                    try{
                                        // fazer request para registrar um appointment
                                        // a fazer
                                        let resp = await fetch("http://localhost:3000/appointments/appoint/", {
                                            method: "POST",
                                            headers: {
                                                'Content-type': 'application/json'
                                            },
                                            body: JSON.stringify({  // conteúdo enviado (do form)
                                                imageurl: this.myCart.receipt[i].image,
                                                petid: this.myCart.receipt[i].appointment.petid,
                                                day: this.myCart.receipt[i].appointment.day,
                                                hour: this.myCart.receipt[i].appointment.hour,
                                                serviceid: this.myCart.receipt[i].id,
                                                ownerid: this.userInfo._id,
                                                petname: this.myCart.receipt[i].appointment.name,
                                                servicename: this.myCart.receipt[i].name,
                                                ownername: this.userInfo.username
                                            })                                            
                                        });


                                        //se a requisição for bem sucedida
                                        if (resp.ok){
                                            console.log("Success!");
                                        }
                                        else{
                                            alert("Couldn't finish the transaction of a service");
                                        }
                                    }
                                    catch(e){
                                        alert("Error " + e);
                                    }
                                }

                                this.myCart.total = this.myCart.total - this.myCart.receipt[i].value;
                            }

                            this.myCart.receipt = [];  // esvazia o carrinho
                            if(this.myCart.total === -0){  // detecta e evita zeros negativos
                                this.myCart.total = 0;  
                            }
                            alert("Transaction finished!");
                        }
                    },

                    // deleta um determinado pet dentre aqueles no vetor de pets
                    deletePet: async function (index) {
                        // deleta o pet
                        try {

                            let resp = await fetch("http://localhost:3000/pets/" + this.pets[index]._id, {
                                method: "DELETE"
                            });

                            // se a requisição foi bem-sucedida:
                            if (resp.ok) {
                                console.log("Pet deleted succesfully!")
                            }
                            else {  // se não for, exibe a mensagem no console
                                alert("Something went wrong. Try again later!")
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }

                        // deleta as reservas do pet
                        try {

                            let resp = await fetch("http://localhost:3000/appointments/free/" + this.pets[index]._id);  // GET request!

                            // se a requisição foi bem-sucedida:
                            if (resp.ok) {
                                this.pets.splice(index, 1);  // remove o pet do vetor que já temos

                                alert("Pet deleted succesfully!")
                            }
                            else {  // se não for, exibe a mensagem no console
                                alert("Something went wrong. Try again later!")
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    // valida o formulário de adição de pets
                    validateFormAddPets: function (e) {
                        e.preventDefault();

                        this.erros = []; // esvazia os erros
                        // checa se deixou algum campo vazio:
                        if (!this.addPetForm.name) {
                            this.erros.push("Fill the pet's name field");
                        }
                        if (!this.addPetForm.species) {
                            this.erros.push("Fill the pet's species field");
                        }
                        if (!this.addPetForm.breed) {
                            this.erros.push("Fill the pet's breed field");
                        }
                        if (!this.addPetForm.age) {
                            this.erros.push("Fill the pet's age field");
                        }
                        else {
                            // checa se é número 
                            if (isNaN(this.addPetForm.age)) {
                                this.erros.push("Invalid age");
                            }
                            else {  // e se é maior que zero
                                if (this.addPetForm.age < 0) {
                                    this.erros.push("Invalid age");
                                }
                            }
                        }

                        if (!this.erros.length) {
                            e.preventDefault();
                            return true;
                        }
                    },

                    // adiciona um pet cujo dono tem um certo "id"
                    addPet: async function (id) {
                        // primeiro adiciona as informações do pet
                        try {
                            if (!this.erros.length) {
                                // faz um post para registrar um pet na base
                                let resp = await fetch("http://localhost:3000/pets/", {
                                    method: "POST",
                                    headers: {
                                        'Content-type': 'application/json'
                                    },
                                    body: JSON.stringify({  // conteúdo enviado (do form)
                                        name: this.addPetForm.name,
                                        species: this.addPetForm.species,
                                        breed: this.addPetForm.breed,
                                        age: this.addPetForm.age,
                                        ownerId: id
                                    })
                                });

                                // se a requisição for bem-sucedida
                                if (resp.ok) {
                                    this.pets.push(await resp.json());
                                    alert("Your pet has been succesfully added!");
                                }
                                else {  // se não for...
                                    alert("Something went wrong. Try again later");
                                }
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }

                        // depois, adiciona a imagem dele
                        if(this.imageFile != null){
                            try {
                                if (!this.erros.length) {
                                    let form = new FormData();
                                    form.append('Image', this.imageFile);

                                    // faz um post para registrar um pet na base
                                    let resp = await fetch("http://localhost:3000/pets/image/" + this.pets[this.pets.length - 1]._id, {
                                        method: "POST",
                                        body: form
                                    });

                                    // se a requisição for bem-sucedida
                                    if (resp.ok) {
                                        let url = await resp.json();
                                        this.pets[this.pets.length - 1].petImage = url.petImage;
                                        console.log("Image succesfully uploaded: " + this.pets[this.pets.length - 1].petImage);
                                    }
                                    else {  // se não for...
                                        alert("Could not upload the image");
                                    }
                                }
                            }
                            catch (e) {
                                alert("Error: " + e);
                            }

                            this.imageFile = null;
                            this.urlPreview = null;
                        }                        
                    },

                    // obtém todos os pets de um  usuário com um certo id
                    getPets: async function (id) {
                        try {
                            // faz um get request para obter os pets do usuário logado
                            let resp = await fetch("http://localhost:3000/pets/owner/" + id);

                            // se a requisição for bem-sucedida
                            if (resp.ok) {
                                this.pets = await resp.json();
                                if(this.pets.name === "NOTFOUND"){  // vetor vazio
                                    this.pets = [];
                                }
                            }
                            else {  // se não for...
                                alert("Something went wrong. Try again later");
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    // adiciona um produto ou serviço ao carrinho
                    // value - valor do serviço/produto;
                    // id - id do serviço/produto;
                    // type - pode ser 'product' ou 'service'.
                    addToCart: function (name, value, id, type, index, image) {
                        for (var i = 0; i < this.qtdSelected; i++) {  // repete de acordo com o número de produtos que o usuário pretende comprar
                            // adiciona um elemento (compra) ao vetor 'receipt':
                            if(type === "product"){
                                this.myCart.receipt.push({
                                    name: name,
                                    value: value,
                                    id: id,
                                    type: type,
                                    index: index
                                });

                                // atualiza o valor total de compras no carrinho:
                                this.myCart.total += value;                                
                            }

                            if(type === "service"){
                                if((this.selectedPet != "" && this.selectedPet != null) && this.selectedAppointment != null){
                                    this.myCart.receipt.push({
                                        name: name,
                                        value: value,
                                        id: id,
                                        type: type,
                                        index: index,
                                        appointment: this.selectedAppointment,
                                        image: image   // imagem do serviço
                                    });

                                    // coloca no receipt o pet escolhido
                                    this.myCart.receipt[this.myCart.receipt.length - 1].appointment.petid = this.selectedPet;

                                    this.myCart.receipt[this.myCart.receipt.length - 1].appointment.name = this.pets.find(x => x._id === this.selectedPet).name;                                    

                                    // atualiza o valor total de compras no carrinho:
                                    this.myCart.total += value;                                    
                                }
                                else{
                                    alert("Choose a pet and a timeslot first!")
                                }
                            }

                            console.log("No carrinho: ", this.myCart.total);
                        }
                        this.qtdSelected = 1;
                    },

                    // Usado pelo cliente logado quando este deseja atualizar suas informações pessoais
                    // na página "Update Info"
                    updateUserInfo: async function () {
                        // atualiza as informações colocados no formulário
                        try {
                            let resp = await fetch("http://localhost:3000/users/update/" + this.userInfo._id, {
                                method: "PUT",
                                headers: {
                                    'Content-type': 'application/json'
                                },
                                body: JSON.stringify({  // conteúdo enviado (do form)
                                    username: this.userInfo.username,
                                    password: this.userInfoUpdated.password,
                                    phonenumber: this.userInfoUpdated.phonenumber,
                                    address: this.userInfoUpdated.address,
                                    email: this.userInfoUpdated.email
                                })
                            });

                            // se a requisição for bem sucedida
                            if (resp.ok) {
                                this.userInfo.username = this.userInfoUpdated.username;
                                this.userInfo.password = this.userInfoUpdated.password;
                                this.userInfo.phonenumber = this.userInfoUpdated.phonenumber;
                                this.userInfo.address = this.userInfoUpdated.address;
                                this.userInfo.email = this.userInfoUpdated.email;
                                alert("Your information has been succesfully updated!");
                            }
                            else {  // se não for...
                                alert("Something went wrong. Try again later!");
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }

                        // atualiza a imagem do usuário
                        if(this.imageFile != null){
                            try {
                                if (!this.erros.length) {
                                        let form = new FormData();
                                        form.append('Image', this.imageFile);

                                    // faz um post para upar a imagem
                                    let resp = await fetch("http://localhost:3000/users/image/" + this.userInfo._id, {
                                        method: "POST",
                                        body: form
                                    });

                                    // se a requisição for bem-sucedida
                                    if (resp.ok) {
                                        let url = await resp.json();
                                        this.userInfo.imageURL = url.profileImage;
                                        console.log("Image succesfully uploaded: " + this.userInfo.imageURL);
                                    }
                                    else {  // se não for...
                                        alert("Could not upload the image");
                                    }
                                }
                            }
                            catch (e) {
                                alert("Error: " + e);
                            }

                            this.imageFile = null;
                            this.urlPreview = null;                          
                        }
                    },

                    // Define um serviço selecionado. Um serviço torna-se um serviço selecionado quando
                    // o usuário clica no botão BOOK de sua miniatura
                    setSelectedService: function (index) {
                        this.selectedService = this.services[index];
                        this.selectedService.index = index;
                    },

                    // obtém todos os serviços na base de dados
                    getEveryService: async function () {
                        try {
                            // faz um get request para obter os serviços
                            let resp = await fetch("http://localhost:3000/services/");

                            // se a requisição for bem-sucedida
                            if (resp.ok) {
                                this.services = await resp.json();
                                if(this.services.name === "NOTFOUND"){  // vetor vazio
                                    this.services = [];
                                }                                
                            }
                            else {  // se não for...
                                alert("Something went wrong. Try again later!");
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    // Define um produto selecionado. Um produto torna-se um produto selecionado quando
                    // o usuário clica no botão BUY de sua miniatura
                    setSelectedProduct: function (index) {
                        this.selectedProduct = this.products[index];
                        this.selectedProduct.index = index;
                    },

                    // obtém todos os produtos na base de dados
                    getEveryProduct: async function () {
                        try {
                            // faz um get request para obter os produtos
                            let resp = await fetch("http://localhost:3000/products/");

                            // se a requisição for bem-sucedida
                            if (resp.ok) {
                                this.products = await resp.json();
                                if(this.products.name === "NOTFOUND"){  // vetor vazio
                                    this.products = [];
                                }                                
                            }
                            else {  // se não for...
                                alert("Something went wrong. Try again later!");
                            }
                        }
                        catch (e) {
                            alert("Error: " + e);
                        }
                    },

                    //usado para fazer o login verdadeiro
                    //esse login leva em conta tanto usuarios quanto admins
                    login: async function () {

                        try {
                            let getresquest = {
                                method: 'GET'
                            };
                            if (!this.admincheck) {
                                this.fetched = await fetch("http://localhost:3000/users/" + this.userInfo.username, getresquest);

                                this.fetched = await this.fetched.json();

                                if (this.fetched.username == "NOTFOUND") {
                                    alert('User Not Found');
                                    console.log('User not found, deal with it later');
                                }
                                else {
                                    //se a senha esta correta, logamos o usuario na sua conta
                                    if (this.fetched.password == this.userInfo.password) {
                                        this.userInfo._id = this.fetched._id;
                                        this.userInfo.address = this.fetched.address;
                                        this.userInfo.username = this.fetched.username;
                                        this.userInfo.password = this.fetched.password;
                                        this.userInfo.phonenumber = this.fetched.phonenumber;
                                        this.userInfo.email = this.fetched.email;
                                        this.userInfo.imageURL = this.fetched.profileImage;
                                        this.userInfoUpdated.username = this.fetched.username;
                                        this.userInfoUpdated.password = this.fetched.password;
                                        this.userInfoUpdated.phonenumber = this.fetched.phonenumber;
                                        this.userInfoUpdated.address = this.fetched.address;
                                        this.userInfoUpdated.email = this.fetched.email;

                                        this.currUser = this.usertypes[0];
                                        this.currPage = this.pages[1];
                                    }
                                    else {
                                        alert('Wrong Password');
                                        console.log(this.fetched.password);
                                        console.log('User found, wrong password, deal with it later');
                                    }
                                }

                            }
                            else {
                                this.fetched = await fetch("http://localhost:3000/admins/" + this.userInfo.username, getresquest);

                                this.fetched = await this.fetched.json();

                                console.log('resp:' + JSON.stringify(this.fetched));

                                if (this.fetched.username == "NOTFOUND") {
                                    alert('User not Found');
                                    console.log('User not found, deal with it later');
                                }
                                else {
                                    //se a senha esta correta, logamos o usuario na sua conta
                                    if (this.fetched.password == this.userInfo.password) {

                                        this.userInfo._id = this.fetched._id;
                                        this.userInfo.address = this.fetched.address;
                                        this.userInfo.username = this.fetched.username;
                                        this.userInfo.password = this.fetched.password;
                                        this.userInfo.phonenumber = this.fetched.phonenumber;
                                        this.userInfo.email = this.fetched.email;
                                        this.userInfo.imageURL = this.fetched.profileImage;
                                        this.userInfo.realName = this.fetched.realName;

                                        this.currUser = this.usertypes[1];
                                        this.currPage = this.pages[1];
                                        console.log('Success');

                                    }
                                    else {
                                        alert('Wrong Password');
                                        console.log(this.fetched.password);
                                        console.log('User found, wrong password, deal with it later');
                                    }
                                }

                            }
                        }
                        catch (error) {
                            console.log(error);
                        }
                    },
                    //signin cria apenas usuarios e nao admins 
                    signin: async function () {
                        try {

                            //tentamos pegar um usuario ja com esse nome, se nao houver, seguimos
                            this.fetched = await fetch("http://localhost:3000/users/" + this.userInfo.username, { method: 'GET' });
                            this.fetched = await this.fetched.json();

                            console.log('Fetch result:' + JSON.stringify(this.fetched));

                            //se nao achamos alguem com esse nome, eh valido    
                            if (this.fetched.username == "NOTFOUND") {

                                let myheaders = new Headers({ "Content-Type": "application/json", });

                                this.fetched = await fetch("http://localhost:3000/users/", {
                                    method: 'POST',
                                    headers: myheaders,
                                    body: JSON.stringify({
                                        "username": this.userInfo.username,
                                        "email": this.userInfo.email,
                                        "phonenumber": this.userInfo.phonenumber,
                                        "password": this.userInfo.password,
                                        "address": this.userInfo.address
                                    })

                                });

                                console.log(this.fetched);

                                if(this.fetched.ok){
                                    // atualiza as informações do usuário logado
                                    this.fetched = await this.fetched.json();

                                    this.userInfo._id = this.fetched._id;
                                    this.userInfo.address = this.fetched.address;
                                    this.userInfo.username = this.fetched.username;
                                    this.userInfo.password = this.fetched.password;
                                    this.userInfo.phonenumber = this.fetched.phonenumber;
                                    this.userInfo.email = this.fetched.email;
                                    this.userInfo.imageURL = this.fetched.profileImage;
                                    this.userInfo.realName = this.fetched.realName;
                                    this.userInfoUpdated.username = this.fetched.username;
                                    this.userInfoUpdated.password = this.fetched.password;
                                    this.userInfoUpdated.phonenumber = this.fetched.phonenumber;
                                    this.userInfoUpdated.address = this.fetched.address;
                                    this.userInfoUpdated.email = this.fetched.email;                                    

                                    // altera a página
                                    this.currUser = this.usertypes[0];
                                    this.currPage = this.pages[1];
                                    console.log('Success');                                    
                                }
                                else{
                                    alert("Something went wrong!");
                                }
                            }
                            else {
                                alert("Username Already in Use");
                            }

                        } catch (error) {
                            console.log(error);
                        }
                    },

                    onlogin() {

                        if (this.admincheck) {
                            this.currUser = this.usertypes[1];
                        }
                        else {
                            this.currUser = this.usertypes[0];
                        }

                        this.currPage = this.pages[1];
                    },

                    setUser(sstring) {
                        this.currUser = sstring;
                    },

                    setPage(sstring) {
                        this.imageFile = null;
                        this.urlPreview = null;
                        this.calendarPage = 0;                        

                        this.currPage = sstring;
                    },

                    exite() {
                        this.myCart.total = 0;
                        this.myCart.receipt = [];

                        this.imageFile = null;
                        this.urlPreview = null;
                        this.calendarPage = 0; 

                        this.setPage("login");
                        this.setUser("N");
                    }
                }
            })

            //javascripts para a tela grande de produtos
            var modal = document.getElementById("fancymodal");
            var closebtn = document.getElementsByClassName("closeButton")[0];

            //Javascripts da tela de "voce tem certeza"
            var modal2 = document.getElementById("confirmmodal");
            var closebtn2 = document.getElementById("confirmclose");

            //javascripts para a tela grande de servicos
            var modal3 = document.getElementById("bigmodal2");
            var closebtn3 = document.getElementById("closem2");


            // mostra a janela grande de um produto
            function showmodal() {
                modal.style.display = "block";
            }

            function closer() {
                modal.style.display = "none";
            }

            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }


            window.onclick = function (event) {
                if (event.target == modal2) {
                    modal2.style.display = "none";
                }

            }

            window.onclick = function (event) {
                if (event.target == modal3) {
                    modal3.style.display = "none";
                }
            }

            function showmodal2() {
                modal2.style.display = "block";
            }

            function closer2() {
                modal2.style.display = "none";
            }

            function showmodal3() {
                modal3.style.display = "block";
            }

            function closer3() {
                modal3.style.display = "none";
            }

            closebtn.addEventListener("click", function () {
                modal.style.display = "none";
            })

            closebtn2.addEventListener("click", function () {
                modal2.style.display = "none";
            })

            closebtn3.addEventListener("click", function () {
                modal3.style.display = "none";
            })

        </script>
</body>

</html>